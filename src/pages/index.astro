---
import BaseLayout from '../layouts/BaseLayout.astro';

const lessons = await Astro.glob('../content/lessons/*.md');
---

<BaseLayout title="Curso Español SPAN1001">
  <div class="space-y-4">
    <p class="text-lg text-slate-700">
      Usa la automatización para poblar esta sección con lecciones nuevas desde Notion. Las entradas se
      guardarán en <code class="bg-slate-100 px-2 py-1 rounded">src/content/lessons</code> y sus imágenes en
      <code class="bg-slate-100 px-2 py-1 rounded">public/images</code>.
    </p>

    <div class="grid gap-4">
      {lessons.map((lesson) => (
        <article class="rounded-lg border border-slate-200 bg-slate-50 p-4">
          <h2 class="text-xl font-semibold">{lesson.frontmatter.title}</h2>
          <p class="text-sm text-slate-600">Unidad: {lesson.frontmatter.unit}</p>
          {lesson.frontmatter.image && (
            <img src={lesson.frontmatter.image} alt={`Ilustración de ${lesson.frontmatter.title}`} class="mt-2 rounded" />
          )}
          <a class="mt-3 inline-flex text-sky-600" href={`/content/lessons/${lesson.frontmatter.slug}/`}>
            Ver lección →
          </a>
        </article>
      ))}
    </div>
  </div>
</BaseLayout>
